<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Quantum Fox</title>

  <!-- Tailwind (for nicer defaults) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- THREE & TWEEN (global) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tween.js/23.1.1/tween.umd.js"></script>

  <!-- Your existing styles -->
  <link rel="stylesheet" href="style.css" />

  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: #0d1117;
      font-family: Inter, system-ui, Arial;
      color: #f3f4f6;
    }

    canvas { display: block; }

    /* Just in case style.css doesn't already define it */
    .hidden { display: none !important; }

    /* HUD */
    #hud {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      padding: 10px 16px;
      z-index: 20;
      display: flex;
      justify-content: space-between;
      pointer-events: none;
      font-weight: 700;
    }

    .hud-box {
      background: rgba(0,0,0,0.7);
      padding: 8px 16px;
      border-radius: 8px;
      border: 2px solid #3b82f6;
      font-size: 1.1rem;
      min-width: 130px;
      text-align: center;
    }

    /* Touch hint */
    #touch-indicator {
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0,0,0,0.7);
      border: 2px solid #3b82f6;
      color: #fcd34d;
      padding: 8px 16px;
      border-radius: 10px;
      font-weight: 700;
      pointer-events: none;
      z-index: 15;
    }

    /* MENU SCREEN (shown by default, no .hidden) */
    #screen-menu {
      position: absolute;
      inset: 0;
      background: rgba(0,0,0,0.85);
      z-index: 40;
      display: flex;            /* always flex, hidden class will override when needed */
      flex-direction: column;
      justify-content: center;
      align-items: center;
      gap: 22px;
    }

    .menu-button {
      background: #3b82f6;
      padding: 14px 26px;
      border: none;
      border-radius: 10px;
      font-weight: 900;
      font-size: 1.4rem;
      color: white;
      cursor: pointer;
      transition: .25s;
    }
    .menu-button:hover {
      background: #2563eb;
      transform: translateY(-2px);
    }

    /* GAME OVER SCREEN (starts hidden, JS removes .hidden) */
    #screen-gameover {
      position: absolute;
      inset: 0;
      background: rgba(0,0,0,0.88);
      z-index: 50;
      display: flex;             /* visible layout; .hidden toggles display:none */
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      opacity: 1;                /* we can still animate opacity if you want */
      transition: opacity .35s ease-in-out;
      pointer-events: auto;
    }

    @keyframes pulse-border {
      0%   { box-shadow:0 0 0 0 rgba(252,211,77,0.4); }
      60%  { box-shadow:0 0 0 12px rgba(252,211,77,0); }
      100% { box-shadow:0 0 0 0 rgba(252,211,77,0); }
    }

    /* LEADERBOARD SCREEN (starts hidden) */
    #screen-leaderboard {
      position: absolute;
      inset: 0;
      background: rgba(0,0,0,0.92);
      z-index: 60;
      display: flex;             /* layout */
      flex-direction: column;
      align-items: center;
      padding-top: 60px;
      overflow-y: auto;
      opacity: 1;
      transition: opacity .3s ease-in-out;
      pointer-events: auto;
    }

    .lb-entry {
      display: flex;
      justify-content: space-between;
      border-bottom: 1px dashed #374151;
      padding: 8px 0;
      width: 100%;
      font-size: 1.1rem;
    }

    .lb-header {
      font-weight: 900;
      font-size: 1.3rem;
      color: #fcd34d;
      border-bottom: 2px solid #fcd34d;
      margin-bottom: 12px;
    }

    /* TRAIL SHOP SCREEN (starts hidden) */
    #screen-trails {
      position: absolute;
      inset: 0;
      background: rgba(0,0,0,0.92);
      z-index: 70;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 40px 0;
      overflow-y: auto;
      opacity: 1;
      transition: opacity .25s ease-in-out;
      pointer-events: auto;
    }

    .trail-item {
      background: rgba(255,255,255,0.05);
      border: 2px solid #3b82f6;
      padding: 14px;
      border-radius: 10px;
      margin-bottom: 12px;
      width: 300px;
      display: flex;
      justify-content: space-between;
      font-weight: 700;
    }
  </style>
</head>

<body>

  <!-- HUD -->
  <div id="hud">
    <div id="label-score" class="hud-box">Score: 0</div>
    <div id="label-highscore" class="hud-box">High Score: 0</div>
    <!-- Optional orbs label if you want it: -->
    <div id="label-orbs" class="hud-box">Orbs: 0</div>
  </div>

  <!-- Touch hint -->
  <div id="touch-indicator">
    Tap Left / Right to Switch Lanes
  </div>

  <!-- THREE.js scene container -->
  <div id="game-container"></div>

  <!-- MENU SCREEN (visible at start) -->
  <div id="screen-menu">
    <button id="btn-start" class="menu-button">START GAME</button>
    <button id="btn-leaderboard" class="menu-button">LEADERBOARD</button>
    <button id="btn-trails" class="menu-button">TRAIL SHOP</button>
  </div>

  <!-- GAME OVER SCREEN (starts hidden via class) -->
  <div id="screen-gameover" class="hidden">

    <h1 style="
      font-size:3.4rem;
      font-weight:900;
      color:#ef4444;
      text-shadow:0 0 18px rgba(239,68,68,0.75);
      margin-bottom:10px;">
      GAME OVER
    </h1>

    <div style="font-size:1.45rem; font-weight:800; margin-bottom:20px;">
      Final Score:
      <span id="label-finalscore"
            style="color:#fbbf24; font-size:2.3rem; font-weight:900; text-shadow:0 0 12px rgba(251,191,36,0.7);">
        0
      </span>
    </div>

    <!-- Initials container (ui.js toggles .hidden) -->
    <div id="initials-container"
         class="hidden"
         style="
           display:flex;
           flex-direction:column;
           align-items:center;
           background:rgba(255,255,255,0.08);
           padding:20px 26px;
           border-radius:14px;
           border:2px solid #fcd34d;
           margin-bottom:22px;
           animation:pulse-border 2s infinite;
         ">

      <div style="font-size:1.2rem; font-weight:800; color:#fcd34d; margin-bottom:10px;">
        NEW HIGH SCORE!
      </div>

      <input id="initials-input" maxlength="5" placeholder="_____"
             style="
               background:#111827;
               border:2px solid #4b5563;
               color:#10b981;
               font-size:2.2rem;
               text-align:center;
               width:260px;
               border-radius:8px;
               margin-bottom:14px;
               text-transform:uppercase;
               font-family:monospace;
               letter-spacing:0.18em;
             ">

      <button id="btn-submit-score"
              style="
                background:#10b981;
                color:#064e3b;
                padding:10px 28px;
                border-radius:8px;
                font-weight:900;
                font-size:1.25rem;
                cursor:pointer;
                border:none;
              ">
        SUBMIT
      </button>
    </div>

    <div style="display:flex; gap:20px;">
      <button id="btn-restart"
              style="
                padding:12px 24px;
                background:#fcd34d;
                color:#111827;
                border-radius:10px;
                border:none;
                font-weight:900;
                font-size:1.25rem;
                cursor:pointer;
              ">
        RESTART
      </button>

      <button id="btn-leaderboard-2"
              style="
                padding:12px 24px;
                background:#3b82f6;
                color:white;
                border-radius:10px;
                border:none;
                font-weight:900;
                font-size:1.25rem;
                cursor:pointer;
              ">
        LEADERBOARD
      </button>
    </div>
  </div>

  <!-- LEADERBOARD SCREEN (starts hidden) -->
  <div id="screen-leaderboard" class="hidden">
    <button id="btn-close-leaderboard"
            style="
              position:absolute;
              top:20px;
              right:20px;
              padding:10px 20px;
              background:#ef4444;
              color:white;
              border:none;
              border-radius:10px;
              font-weight:900;
              font-size:1.1rem;
              cursor:pointer;
            ">
      ✕ CLOSE
    </button>

    <h1 style="font-size:3rem; font-weight:900; color:#10b981; margin-bottom:20px;">
      TOP 100 RUNNERS
    </h1>

    <div style="
      width:90%;
      max-width:600px;
      background:rgba(0,0,0,0.7);
      padding:20px;
      border-radius:10px;
      border:2px solid #10b981;
      max-height:70vh;
      overflow-y:auto;">
<div class="lb-entry lb-header">
  <span style="width:20%; text-align:center; font-weight:900;">RANK</span>
  <span style="width:40%; font-weight:900;">INITIALS</span>
  <span style="width:40%; text-align:right; font-weight:900;">SCORE</span>
</div>
      <div id="leaderboard-list">Loading...</div>
    </div>
  </div>

  <!-- TRAIL SHOP SCREEN (starts hidden) -->
  <div id="screen-trails" class="hidden">
    <button id="btn-close-trails"
            style="
              position:absolute;
              top:20px;
              right:20px;
              background:#ef4444;
              color:white;
              padding:8px 16px;
              border:none;
              border-radius:10px;
              font-weight:900;
              font-size:1.1rem;
              cursor:pointer;
            ">
      ✕ CLOSE
    </button>

    <h1 style="font-size:3rem; color:#3b82f6; font-weight:900; margin-bottom:20px;">
      TRAIL SHOP
    </h1>

    <div id="trail-list" style="width:300px;">
      <!-- Filled dynamically by updateTrailList() -->
    </div>
  </div>

  <!-- SINGLE ENTRYPOINT -->
  <!-- Change to "game.js" if your files are not inside /src -->
  <script type="module" src="src/game.js"></script>
</body>
</html>



